webpackJsonp([43252960977049],{452:function(e,t){e.exports={data:{site:{siteMetadata:{title:"To kill a mocking bug",subtitle:"Unearthing curious .NET behaviour",author:{name:"Jeroen Vannevel",twitter:"VannevelJeroen"},disqusShortname:"",url:"https://vannevel.net"}},markdownRemark:{id:"C:/Source/vannevelj.github.io/lumen/src/pages/articles/2019-05-26---Exposing-ElasticSearch-From-An-Azure-VM/index.md absPath of file >>> MarkdownRemark",html:'<p>After I set up ElasticSearch on a Windows Server 2019 VM in Azure, I noticed that I could query the instance from the VM itself but not from outside of it.</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/error-49fcd037a13c2bce29e79e11cc5a096e-da44e.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 960px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 13.884228187919462%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAkUlEQVQI113NwQ6CMBAEUJR6AElMkLS1pESNB+1uAxR2IYL//1tWDx5MXiZzmknO42K6oEPQ/VCGtRqW3M+ZveVHldZX0a1pu2671wbnBPjfxY0NcOm4goiqeyi0LU6NfPSqfUoYc0fC0Q5YfP1KlGjk6ACcAUvkBtn4SfvJACmgGlkhx7T4WTdIFqmOZ8B74Df9FBnYO8fLmQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="Console output"\n        title=""\n        src="/static/error-49fcd037a13c2bce29e79e11cc5a096e-c83f1.png"\n        srcset="/static/error-49fcd037a13c2bce29e79e11cc5a096e-569e3.png 240w,\n/static/error-49fcd037a13c2bce29e79e11cc5a096e-93400.png 480w,\n/static/error-49fcd037a13c2bce29e79e11cc5a096e-c83f1.png 960w,\n/static/error-49fcd037a13c2bce29e79e11cc5a096e-23e13.png 1440w,\n/static/error-49fcd037a13c2bce29e79e11cc5a096e-10d8f.png 1920w,\n/static/error-49fcd037a13c2bce29e79e11cc5a096e-da44e.png 2384w"\n        sizes="(max-width: 960px) 100vw, 960px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>The solution to expose it was two-fold: </p>\n<ol>\n<li>Assign <code class="language-text">network.host</code></li>\n<li>Assign <code class="language-text">discovery.seed_hosts</code></li>\n</ol>\n<p>Without the latter, you will find an error like this in your logs (<code class="language-text">C:\\ProgramData\\Elastic\\Elasticsearch\\logs</code>):</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">[2019-05-26T15:55:43,504][INFO ][o.e.b.BootstrapChecks    ] [rapide] bound or publishing to a non-loopback address, enforcing bootstrap checks\n[2019-05-26T15:55:43,519][ERROR][o.e.b.Bootstrap          ] [rapide] node validation exception\n[1] bootstrap checks failed\n[1]: the default discovery settings are unsuitable for production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured</code></pre>\n      </div>\n<p>These values worked for me:</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">network.host: 0.0.0.0\ndiscovery.seed_hosts: [&quot;127.0.0.1&quot;, &quot;[::1]&quot;]</code></pre>\n      </div>\n<p>I verified it worked by executing the following request. Change <code class="language-text">&lt;IP&gt;</code> with <code class="language-text">localhost</code> if you test on the VM or the VMâ€™s public IP if you execute it outside of it.</p>\n<div class="gatsby-highlight">\n      <pre class="language-text"><code class="language-text">Invoke-WebRequest -method GET &#39;http://&lt;IP&gt;:9200/_cat/indices?v&#39;</code></pre>\n      </div>\n<p>The output should look something like this:</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/output-89eb8f32a4e586f88e408b0d28379350-53706.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 960px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 43.53276353276353%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAACToAAAk6AGCYwUcAAABUElEQVQoz4VS207CQBBdquXS4gWBqDE+gAJtARUsavQj+mKvFMtF1P//gXFmuluN0fhwMjPd3XOZVBjDFA5uMjDHMVYPmq4HjakHFSsAczgH3YlBDEIQdvQFS879AMSFX6B0iXPL3UDFjsEYpVAfZyA6IR5EsNML+YLWC7jfRaiqekY/B5MRcXu2gaqTINkC2rM11hT2r1+4mqMcLHa14Dt0tid7gomgWR9EOWENY4nuM5TtBM4e3xFvcPqwZdfaNwd8Ge/9CRVZdPKBFE7ut9By14zju1fc5ZL75u2KnZZRhAxUnTkKJpyshj19K0Q1Yu367Iji0CFFMbDmSLnWZTSOKyMTIYlQLQhpB+SSHjYmSyYkN6TMOyRyuUsT91oI4lySZhgq8vnTB+hWzMqHk4yj08P8stqR/3svSRTY4dF0xf+hUqbdUERN/jb/4SfpJ+xgE+YD0yBnAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="Console output"\n        title=""\n        src="/static/output-89eb8f32a4e586f88e408b0d28379350-c83f1.png"\n        srcset="/static/output-89eb8f32a4e586f88e408b0d28379350-569e3.png 240w,\n/static/output-89eb8f32a4e586f88e408b0d28379350-93400.png 480w,\n/static/output-89eb8f32a4e586f88e408b0d28379350-c83f1.png 960w,\n/static/output-89eb8f32a4e586f88e408b0d28379350-23e13.png 1440w,\n/static/output-89eb8f32a4e586f88e408b0d28379350-53706.png 1755w"\n        sizes="(max-width: 960px) 100vw, 960px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>',fields:{tagSlugs:["/tags/azure/","/tags/elastic-search/"]},frontmatter:{title:"Exposing ElasticSearch from an Azure VM",tags:["Azure","ElasticSearch"],date:"2019-05-26T20:00:00.000Z",description:"Exposing your ElasticSearch service from an Azure VM"}}},pathContext:{slug:"/posts/exposing-elasticsearch-from-azure-vm"}}}});
//# sourceMappingURL=path---posts-exposing-elasticsearch-from-azure-vm-a99cac8a334343083be3.js.map